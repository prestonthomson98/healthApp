<!DOCTYPE html>
<html lang="en">
<head>
  <title>Modify Plan</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="./bootstrap/css/bootstrap.min.css">
  <script src="./assets/js/handleState.js" type="text/javascript"></script>
  <script src="./bootstrap/js/jquery.min.js"></script>
  <script src="./bootstrap/js/bootstrap.bundle.js"></script>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light" style="background-color: lightcoral;">
  <div class="container-fluid">
    <a class="navbar-brand" href="index.html">Hability</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
    <div class="navbar-nav">
      <a class="nav-link" href="index.html">Home</a>
      <a class="nav-link" href="Calendar.html">Calendar</a>
      <a class="nav-link active" aria-current="page" href="ModifyPlan.html">Modify Plan</a>
      <a class="nav-link" href="WorkoutInfo.html">Workout Cheatsheet</a>
    </div>
    </div>
  </div>
</nav>
  
<div class="container" style="margin-bottom: 2%;">
  <div class="jumbotron text-center" style="margin-top: 2%; margin-bottom: 2%;">
    <h1>Modify Plan</h1>
  </div>
  <form id="modifyPlanForm">
    <div class="form-floating mb-3">
      <input type="text" class="form-control" id="nameInput" placeholder="CMSC434 Student" name="name" required>
      <label for="floatingInput">Name</label>
    </div>

    <div class="mb-3">
      <select class="form-select" aria-label="Select Sex" id="sexInput" name="sex" required>
        <option value="" disabled selected>Select Sex</option>
        <option value="male">Male</option>
        <option value="female">Female</option>
      </select>
    </div>

    <div class="form-floating mb-3">
      <input type="number" step="1" min="1" max="200" class="form-control" id="ageInput" placeholder="21" name="age" required>
      <label for="floatingInput">Age (in years)</label>
    </div>

    <div class="form-floating mb-3">
      <input type="number" step="1" min="1" max="1000" class="form-control" id="weightInput" placeholder="100" name="weight" required>
      <label for="floatingInput">Weight (in pounds)</label>
    </div>

    <div class="mb-3">
      <select class="form-select" aria-label="Select goal" id="goalInput" name="goal" required>
        <option value="" disabled selected>Select a Goal</option>
        <option value="lose-weight">Lose weight</option>
        <option value="build-muscles">Build muscles</option>
        <option value="improve-endurance">Improve endurance</option>
      </select>
    </div>

    <div class="mb-3">
      <select class="form-select" aria-label="Select Exercise" id="exerciseInput" name="exercise" required>
        <option value="" disabled selected>Select an Exercise</option>
        <option value="run">Running</option>
        <option value="walk">Walking</option>
        <option value="bike">Biking</option>
        <option value="swim">Swimming</option>
        <option value="basketball">Basketball</option>
        <option value="situps">Sit-ups</option>
        <option value="dumbbells">Dumbbells</option>
      </select>
      <small id="exerciseInputHelp" class="form-text text-muted">See a list of Hability supported exercises <a href="./WorkoutInfo.html">here</a>.</small>
    </div>

    <div class="mb-3">
      <select class="form-select" aria-label="Select Day or Night" id="dayOrNightInput" name="dayOrNight" required>
        <option value="" disabled selected>Early Bird or Night Owl?</option>
        <option value="day">Early Bird</option>
        <option value="night">Night Owl</option>
      </select>
    </div>

    <div class="form-floating mb-3">
      <input type="time" id="earliest_start" class="form-control" name="earliest_start" min="00:00" max="23:59" required>
      <label for="floatingInput">Earliest Possible Start Time</label>
    </div>

    <div class="form-floating mb-3">
      <input type="time" id="latest_start" class="form-control" name="latest_start" min="00:00" max="23:59" required>
      <label for="floatingInput">Latest Possible Start Time</label>
    </div>

    <div class="form-floating mb-3">
      <input type="number" step="1" min="1" max="60" class="form-control" id="durationInput" name="duration" placeholder="30" required>
      <label for="floatingInput">Exercise Duration (in minutes)</label>
    </div>
    
    <button type="submit" class="btn btn-primary">Modify Plan</button>
  </form>
</div>
</body>
<script>
  loadInitialState();
  if(localStorage.getItem("name") !== null) {
    document.getElementById("nameInput").value = localStorage.getItem("name");
  }
  if(localStorage.getItem("sex") !== null) {
    document.getElementById("sexInput").value = localStorage.getItem("sex");
  }
  if(localStorage.getItem("age") !== null) {
    document.getElementById("ageInput").value = localStorage.getItem("age");
  }
  if(localStorage.getItem("weight") !== null) {
    document.getElementById("weightInput").value = localStorage.getItem("weight");
  }
  if(localStorage.getItem("goal") !== null) {
    document.getElementById("goalInput").value = localStorage.getItem("goal");
  }
  if(localStorage.getItem("exercise") !== null) {
    document.getElementById("exerciseInput").value = localStorage.getItem("exercise");
  }
  if(localStorage.getItem("dayOrNight") !== null) {
    document.getElementById("dayOrNightInput").value = localStorage.getItem("dayOrNight");
  }
  if(localStorage.getItem("earliest_start") !== null) {
    document.getElementById("earliest_start").value = localStorage.getItem("earliest_start");
  }
  if(localStorage.getItem("latest_start") !== null) {
    document.getElementById("latest_start").value = localStorage.getItem("latest_start");
  }
  if(localStorage.getItem("duration") !== null) {
    document.getElementById("durationInput").value = localStorage.getItem("duration");
  }
  $("#modifyPlanForm").submit((e) => {
    const formData = new FormData(e.target);
    for(var pair of formData.entries()) {
      localStorage.setItem(pair[0], pair[1]);
    }
    window.location.href = "index.html";
    return false;
  });
</script>
</html>
