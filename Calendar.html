<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script>document.getElementsByTagName("html")[0].className += " js";</script>
  <link rel="stylesheet" href="assets/css/style.css">

  <title>Calendar</title>
  <script src="./assets/js/handleState.js" type="text/javascript"></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="./bootstrap/css/bootstrap.min.css">
  <script src="./bootstrap/js/jquery.min.js"></script>
  <script src="./bootstrap/js/bootstrap.bundle.js"></script>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-light" style="background-color: lightcoral;">
    <div class="container-fluid">
      <a class="navbar-brand" href="index.html">Hability</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
      <div class="navbar-nav">
        <a class="nav-link" href="index.html">Home</a>
        <a class="nav-link active" aria-current="page" href="Calendar.html">Calendar</a>
        <a class="nav-link" href="ModifyPlan.html">Modify Plan</a>
        <a class="nav-link" href="WorkoutInfo.html">Workout Cheatsheet</a>
      </div>
      </div>
    </div>
  </nav>

  <div class="container">
    <div class="jumbotron text-center" style="margin-top: 2%; margin-bottom: 2%;">
      <h1>Calendar</h1>
      <div>
        <span class="badge" style="background: hsl(31, 89%, 68%);">Workout</span>
        <span class="badge" style="background: hsl(199, 25%, 46%)">Meals</span>
        <span class="badge" style="background: hsl(271, 23%, 26%)">Events</span>
      </div>
      <div style="padding-top:20px">
        <button type="button" onClick="window.location='AddEvent.html';" class="btn btn-primary">Add Event</button>
        <button type="button" id="randomizeWorkouts" class="btn btn-primary">Randomize Workouts</button>
      </div>
    </div>
  </div>

<!-- Modal -->
<div class="modal fade" id="eventModal" tabindex="-1" aria-labelledby="eventModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form id="modifyEventForm">       
      <div class="modal-header">
        <h5 class="modal-title" id="eventModalTitle">Type</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="badge type form-floating mb-3">
          <span class="badge" style="background: hsl(31, 89%, 68%);" id="eventBadge"><i class="fas fa-dumbbell"></i>Workout Type</span>
        </div>
      
          <div class="form-floating mb-3">
            <textarea class="form-control" placeholder="Notes" name="description" id="note" style="height: 100px" required></textarea>
            <label for="floatingInput">Notes</label>
          </div>

          <div class="form-floating mb-3" id="caloriesFormInput">
              <input type="number" class="form-control" name="calories" id="calories" required disabled>
              <label for="floatingInput" id="caloriesLabel">Calories Burned (in kcal)</label>
          </div>
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Save changes</button>
      </div>
      </form>
    </div>
  </div>
</div>

  <div class="cd-schedule cd-schedule--loading margin-top-lg margin-bottom-lg js-cd-schedule">
    <div class="cd-schedule__timeline">
      <ul>
        <li><span>00:00</span></li>
        <li><span>01:00</span></li>
        <li><span>02:00</span></li>
        <li><span>03:00</span></li>
        <li><span>04:00</span></li>
        <li><span>05:00</span></li>
        <li><span>06:00</span></li>
        <li><span>07:00</span></li>
        <li><span>08:00</span></li>
        <li><span>09:00</span></li>
        <li><span>10:00</span></li>
        <li><span>11:00</span></li>
        <li><span>12:00</span></li>
        <li><span>13:00</span></li>
        <li><span>14:00</span></li>
        <li><span>15:30</span></li>
        <li><span>16:00</span></li>
        <li><span>17:30</span></li>
        <li><span>18:00</span></li>
        <li><span>19:30</span></li>
        <li><span>20:00</span></li>
        <li><span>21:30</span></li>
        <li><span>22:00</span></li>
        <li><span>23:00</span></li>
        <li><span>24:00</span></li>
      </ul>
    </div>
    <!-- .cd-schedule__timeline -->

    <div class="cd-schedule__events">
      <ul>
        <li class="cd-schedule__group">
          <div class="cd-schedule__top-info"><span>Monday</span></div>

          <ul id="monday_schedule">
          </ul>
        </li>

        <li class="cd-schedule__group">
          <div class="cd-schedule__top-info"><span>Tuesday</span></div>

          <ul id="tuesday_schedule">

          </ul>
        </li>

        <li class="cd-schedule__group">
          <div class="cd-schedule__top-info"><span>Wednesday</span></div>

          <ul id="wednesday_schedule">
          </ul>
        </li>

        <li class="cd-schedule__group">
          <div class="cd-schedule__top-info"><span>Thursday</span></div>

          <ul id="thursday_schedule">
          </ul>
        </li>

        <li class="cd-schedule__group">
          <div class="cd-schedule__top-info"><span>Friday</span></div>

          <ul id="friday_schedule">
          </ul>
        </li>
      </ul>
    </div>

    <div class="cd-schedule-modal">
      <header class="cd-schedule-modal__header">
        <div class="cd-schedule-modal__content">
          <span class="cd-schedule-modal__date"></span>
          <h3 class="cd-schedule-modal__name"></h3>
        </div>

        <div class="cd-schedule-modal__header-bg"></div>
      </header>

      <div class="cd-schedule-modal__body">
        <div class="cd-schedule-modal__event-info"></div>
        <div class="cd-schedule-modal__body-bg"></div>
      </div>

      <a href="#0" class="cd-schedule-modal__close text-replace">Close</a>
    </div>

    <div class="cd-schedule__cover-layer"></div>
  </div> <!-- .cd-schedule -->
  <script>
    loadInitialState();
    generateWorkouts(false);
    generateCalendarEvents();
    scrollToWorkoutEvents();
    $('#randomizeWorkouts').click(() => {
      generateWorkouts(true);
      location.reload();
    });
    $("#modifyEventForm").submit((e) => {
      const formData = new FormData(e.target);
      let update_fields = {}
      for(var pair of formData.entries()) {
        update_fields[pair[0]] = pair[1];
      }
      if(document.getElementById("eventBadge").innerHTML === "Event") {
        delete update_fields["calories"]
      }
      updateEventFields(localStorage.getItem("selected_event"), update_fields);
      console.log(update_fields);
      $('#eventModal').modal('hide');
      return false;
    });
  </script>

  <script src="assets/js/util.js"></script> <!-- util functions included in the CodyHouse framework -->
  <script src="assets/js/main.js"></script>
</body>
</html>
